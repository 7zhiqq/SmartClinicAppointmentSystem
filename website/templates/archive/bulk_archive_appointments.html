<!-- website/templates/archive/bulk_archive_appointments.html -->

{% extends "components/base.html" %}
{% load static %}

{% block content %}
    <link rel="stylesheet" href="{% static 'css/edit-profile.css' %}">
    
    {% if user.is_authenticated and user.role in 'staff,manager' %}
        {% include "components/sidebar/staff.html" %}

        <div class="main-content">
            <div class="edit-profile-wrapper">
                <h2>
                    <i class="bi bi-archive-fill"></i> 
                    Bulk Archive Appointments
                </h2>
                <p class="subtitle">
                    Archive old completed, rejected, or no-show appointments to keep your system organized
                </p>

                <div style="background: rgba(245, 158, 11, 0.1); padding: 15px; border-left: 4px solid var(--warning); border-radius: 8px; margin-bottom: 20px;">
                    <p style="margin: 0; color: var(--warning);">
                        <i class="bi bi-info-circle"></i>
                        <strong>Note:</strong> This will archive appointments that are:
                    </p>
                    <ul style="margin: 10px 0 0 20px;">
                        <li>Older than the specified number of days</li>
                        <li>Have a status of completed, rejected, or no-show</li>
                        <li>Can be restored later if needed</li>
                    </ul>
                </div>

                <form method="post">
                    {% csrf_token %}
                    
                    <div class="form-group">
                        <label for="days">Archive appointments older than:</label>
                        <select name="days" id="days" class="form-control">
                            <option value="30">30 days (1 month)</option>
                            <option value="60">60 days (2 months)</option>
                            <option value="90" selected>90 days (3 months) - Recommended</option>
                            <option value="180">180 days (6 months)</option>
                            <option value="365">365 days (1 year)</option>
                        </select>
                        <small class="form-text text-muted">
                            <i class="bi bi-info-circle"></i> 
                            Only completed, rejected, and no-show appointments will be archived
                        </small>
                    </div>

                    <div class="form-actions">
                        <button 
                            type="submit" 
                            class="btn btn-primary" 
                            onclick="return confirm('Are you sure you want to archive old appointments? This action can be undone by restoring individual appointments.');"
                        >
                            <i class="bi bi-archive-fill"></i> Archive Appointments
                        </button>
                        <a href="{% url 'appointments' %}" class="btn btn-secondary">
                            <i class="bi bi-x"></i> Cancel
                        </a>
                    </div>
                </form>

                <hr style="margin: 30px 0; border-color: var(--border-light);">

                <div style="margin-top: 30px;">
                    <h3 style="margin-bottom: 15px;">
                        <i class="bi bi-clock-history"></i> Archive History
                    </h3>
                    <p class="text-muted">
                        View all archived appointments in the 
                        <a href="{% url 'archived_appointments' %}">Archived Appointments</a> page.
                    </p>
                </div>
            </div>
        </div>
    {% endif %}
{% endblock %}