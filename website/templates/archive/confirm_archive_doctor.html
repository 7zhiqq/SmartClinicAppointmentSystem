<!-- CONFIRM ARCHIVE DOCTOR -->
{% extends "components/base.html" %}
{% load static %}

{% block content %}
<link rel="stylesheet" href="{% static 'css/archive.css' %}">
{% if user.is_authenticated and user.role == "manager" %}
    {% include "components/sidebar/manager.html" %}

    <div class="main-content">
        <div class="archive-confirm-wrapper">
            <div class="archive-header">
                <i class="bi bi-archive warning-icon"></i>
                <h2>Archive Doctor</h2>
                <p class="warning-text">
                    This will archive the doctor and all related appointments and availability records.
                </p>
            </div>

            <div class="patient-summary">
                <h3>Doctor Information</h3>
                <div class="summary-grid">
                    <div class="summary-item">
                        <span class="label">Name:</span>
                        <span class="value">Dr. {{ doctor.user.get_full_name }}</span>
                    </div>
                    <div class="summary-item">
                        <span class="label">Specialization:</span>
                        <span class="value">{{ doctor.specialization.name|default:"General" }}</span>
                    </div>
                    <div class="summary-item">
                        <span class="label">License:</span>
                        <span class="value">{{ doctor.license_number }}</span>
                    </div>
                    <div class="summary-item">
                        <span class="label">Experience:</span>
                        <span class="value">{{ doctor.years_experience }} years</span>
                    </div>
                </div>
            </div>

            <div class="affected-records">
                <h3>What will be archived:</h3>
                <ul>
                    <li><i class="bi bi-check-circle"></i> Doctor profile information</li>
                    <li><i class="bi bi-check-circle"></i> All availability schedules</li>
                    <li><i class="bi bi-check-circle"></i> All appointments ({{ doctor.appointment_set.count }} + dependent appointments)</li>
                </ul>
            </div>

            <form method="post" class="archive-form">
                {% csrf_token %}
                
                <div class="form-group">
                    <label for="reason">Reason for archiving <span class="optional">(optional)</span></label>
                    <textarea name="reason" id="reason" rows="3" class="form-control"
                        placeholder="Enter reason for archiving this doctor..."></textarea>
                </div>

                <div class="action-buttons">
                    <button type="submit" class="btn btn-warning">
                        <i class="bi bi-archive"></i> Archive Doctor
                    </button>
                    <a href="{% url 'manager_users_list' %}" class="btn btn-secondary">
                        <i class="bi bi-x"></i> Cancel
                    </a>
                </div>
            </form>
        </div>
    </div>
{% endif %}
{% endblock %}